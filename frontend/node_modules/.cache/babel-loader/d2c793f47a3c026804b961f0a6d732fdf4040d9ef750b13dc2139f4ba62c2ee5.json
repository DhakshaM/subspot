{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Link}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faArrowLeft,faEllipsisV,faEllipsisH,faDownload,faPaperclip,faPaperPlane,faFilePdf,faBan}from'@fortawesome/free-solid-svg-icons';import'./ChatListPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatListPage=()=>{// Now we include both the value AND the setter\nconst[chatList,setChatList]=useState([{id:'Friend1',name:'Friend1'},{id:'Friend2',name:'Friend2'},{id:'Seller1',name:'Seller1'}]);const[selectedChat,setSelectedChat]=useState(null);// Preload some messages for Friend1\nconst[messages,setMessages]=useState({Friend1:[{user:'Friend1',message:'Hello!',time:'10:00 AM'},{user:'Me',message:'Hi there!',time:'10:01 AM'}]});const[typedMessage,setTypedMessage]=useState('');const[replyMsg,setReplyMsg]=useState(null);const fileInputRef=useRef(null);// Modals / popups\nconst[modalImage,setModalImage]=useState(null);const[pdfModal,setPdfModal]=useState({open:false,src:'',fileName:''});const[deletePopup,setDeletePopup]=useState({open:false,msgIndex:null});const[menuOpen,setMenuOpen]=useState(false);const[openMsgOptions,setOpenMsgOptions]=useState(null);const menuRef=useRef(null);const msgOptionsRef=useRef(null);// WebSocket for the current friend\nconst[socket,setSocket]=useState(null);const getTimeStamp=()=>new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});// Open WebSocket whenever selectedChat changes\nuseEffect(()=>{if(!selectedChat)return;const ws=new WebSocket(`ws://127.0.0.1:8000/ws/chat/${selectedChat}/`);ws.onopen=()=>{console.log('WebSocket connected for room:',selectedChat);};ws.onmessage=e=>{const data=JSON.parse(e.data);if(data.message){setMessages(prev=>({...prev,[selectedChat]:[...(prev[selectedChat]||[]),data]}));}};ws.onerror=err=>console.error('WebSocket error:',err);ws.onclose=e=>console.warn('WebSocket closed:',e);setSocket(ws);return()=>ws.close();},[selectedChat]);// Send a message\nconst handleSend=()=>{if(!socket||!typedMessage.trim()||!selectedChat)return;const newMessage={user:'Me',message:typedMessage,time:getTimeStamp()};if(replyMsg){newMessage.replyTo={user:replyMsg.user||'Them',message:replyMsg.message};}setMessages(prev=>({...prev,[selectedChat]:[...(prev[selectedChat]||[]),newMessage]}));socket.send(JSON.stringify({message:typedMessage}));setTypedMessage('');setReplyMsg(null);};// File upload\nconst handleUploadClick=()=>{var _fileInputRef$current;if(!selectedChat)return;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleFileChange=e=>{const file=e.target.files[0];if(!file||!selectedChat)return;const fileName=file.name;const fileType=file.type.toLowerCase();const timeStamp=getTimeStamp();const reader=new FileReader();reader.onload=()=>{let newMsg={user:'Me',time:timeStamp};if(fileType.startsWith('image/')){newMsg.type='image';newMsg.src=reader.result;}else if(fileType==='application/pdf'||fileName.toLowerCase().endsWith('.pdf')){newMsg.type='pdf';newMsg.src=reader.result;newMsg.fileName=fileName;}else{newMsg.type='file';newMsg.src=reader.result;newMsg.fileName=fileName;}setMessages(prev=>({...prev,[selectedChat]:[...(prev[selectedChat]||[]),newMsg]}));};reader.readAsDataURL(file);e.target.value='';};// Image/PDF modals\nconst openImageModal=src=>setModalImage(src);const closeImageModal=()=>setModalImage(null);const openPdfModal=(src,fileName)=>setPdfModal({open:true,src,fileName});const closePdfModal=()=>setPdfModal({open:false,src:'',fileName:''});// Header menu\nconst toggleMenu=()=>setMenuOpen(prev=>!prev);// Message options\nconst toggleMsgOptions=index=>setOpenMsgOptions(prev=>prev===index?null:index);const openDeletePopup=index=>setDeletePopup({open:true,msgIndex:index});const handleDeletePopupClose=()=>setDeletePopup({open:false,msgIndex:null});// Delete or reply\nconst handleDeleteMessage=function(chatId,msgIndex){let deleteForAll=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;setMessages(prev=>{const updated=[...(prev[chatId]||[])];if(!deleteForAll){updated.splice(msgIndex,1);}else{const originalMsg=updated[msgIndex];updated[msgIndex]={...originalMsg,type:'deleted',message:'You deleted this message',replyTo:undefined,src:undefined,fileName:undefined};}return{...prev,[chatId]:updated};});setDeletePopup({open:false,msgIndex:null});setOpenMsgOptions(null);};const handleReplyMessage=msg=>{setReplyMsg(msg);setOpenMsgOptions(null);};// Close dropdowns if clicking outside\nuseEffect(()=>{const handleClickOutside=e=>{if(menuRef.current&&!menuRef.current.contains(e.target)){setMenuOpen(false);}if(msgOptionsRef.current&&!msgOptionsRef.current.contains(e.target)){setOpenMsgOptions(null);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chats-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chats-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chats-left-panel\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chats-left-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"back-link arrow-only\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowLeft})}),/*#__PURE__*/_jsx(\"h2\",{className:\"chats-title\",children:\"Chat\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"chat-list\",style:{textAlign:'center'},children:chatList.map(chat=>/*#__PURE__*/_jsx(\"li\",{className:`chat-item ${selectedChat===chat.id?'active':''}`,onClick:()=>setSelectedChat(chat.id),children:/*#__PURE__*/_jsx(\"span\",{className:\"chat-link\",children:chat.name})},chat.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:selectedChat?'chats-right-panel doodle':'chats-right-panel',children:selectedChat?/*#__PURE__*/_jsxs(\"div\",{className:\"chat-content\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chats-right-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"chat-contact-name\",children:selectedChat}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header-actions\",ref:menuRef,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEllipsisV,className:\"ellipsis-icon\",onClick:toggleMenu}),menuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-menu-dropdown\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:()=>{setMessages(prev=>({...prev,[selectedChat]:[]}));setMenuOpen(false);},children:\"Clear Chat\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item\",onClick:()=>{// Remove friend from chatList and messages\nsetChatList(prev=>prev.filter(c=>c.id!==selectedChat));setMessages(prev=>{const newMsgs={...prev};delete newMsgs[selectedChat];return newMsgs;});setSelectedChat(null);setMenuOpen(false);},children:\"Delete Chat\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-messages\",ref:msgOptionsRef,children:(messages[selectedChat]||[]).map((msg,index)=>{const isMine=msg.user==='Me';return/*#__PURE__*/_jsxs(\"div\",{className:`message-wrapper ${isMine?'mine':'theirs'}`,children:[isMine&&/*#__PURE__*/_jsxs(\"div\",{className:\"msg-options-container\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEllipsisH,className:\"msg-options-icon\",onClick:()=>toggleMsgOptions(index)}),openMsgOptions===index&&/*#__PURE__*/_jsxs(\"div\",{className:\"msg-options-dropdown\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"msg-option-item\",onClick:()=>handleReplyMessage(msg),children:\"Reply\"}),/*#__PURE__*/_jsx(\"div\",{className:\"msg-option-item\",onClick:()=>openDeletePopup(index),children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:`message-bubble ${isMine?'mine':'theirs'}`,children:[msg.replyTo&&/*#__PURE__*/_jsxs(\"div\",{className:\"mini-reply-bubble\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mini-reply-sender\",children:msg.replyTo.user}),/*#__PURE__*/_jsx(\"span\",{className:\"mini-reply-text\",children:msg.replyTo.message})]}),msg.type==='deleted'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-text deleted\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBan,className:\"deleted-icon\"}),msg.message]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-time\",children:msg.time})]}):msg.type==='image'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:msg.src,alt:\"sent\",className:\"message-image\",onClick:()=>openImageModal(msg.src)}),/*#__PURE__*/_jsx(\"div\",{className:\"message-time\",children:msg.time})]}):msg.type==='pdf'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pdf-preview\",onClick:()=>openPdfModal(msg.src,msg.fileName),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFilePdf,className:\"pdf-icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"pdf-filename\",children:msg.fileName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-time\",children:msg.time})]}):msg.type==='file'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{href:msg.src,download:msg.fileName,className:\"file-link\",title:\"Download File\",children:msg.fileName}),/*#__PURE__*/_jsx(\"div\",{className:\"message-time\",children:msg.time})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:msg.message}),/*#__PURE__*/_jsx(\"div\",{className:\"message-time\",children:msg.time})]})]}),!isMine&&/*#__PURE__*/_jsxs(\"div\",{className:\"msg-options-container\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEllipsisH,className:\"msg-options-icon\",onClick:()=>toggleMsgOptions(index)}),openMsgOptions===index&&/*#__PURE__*/_jsxs(\"div\",{className:\"msg-options-dropdown\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"msg-option-item\",onClick:()=>handleReplyMessage(msg),children:\"Reply\"}),/*#__PURE__*/_jsx(\"div\",{className:\"msg-option-item\",onClick:()=>openDeletePopup(index),children:\"Delete\"})]})]})]},index);})}),replyMsg&&/*#__PURE__*/_jsxs(\"div\",{className:\"reply-bubble\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reply-text\",children:replyMsg.message}),/*#__PURE__*/_jsx(\"span\",{className:\"cancel-reply\",onClick:()=>setReplyMsg(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chats-input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type a message...\",value:typedMessage,onChange:e=>setTypedMessage(e.target.value),onKeyDown:e=>{if(e.key==='Enter')handleSend();}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane,className:\"send-icon\",onClick:handleSend}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\",ref:fileInputRef,style:{display:'none'},onChange:handleFileChange}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperclip,className:\"upload-icon\",onClick:handleUploadClick})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"chat-placeholder\",children:\"Start Messaging\"})})]}),deletePopup.open&&/*#__PURE__*/_jsx(\"div\",{className:\"delete-popup-modal\",onClick:handleDeletePopupClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"delete-popup-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"p\",{children:\"Delete message:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"delete-popup-options\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"delete-option\",onClick:()=>handleDeleteMessage(selectedChat,deletePopup.msgIndex,false),children:\"Delete for me\"}),/*#__PURE__*/_jsx(\"span\",{className:\"delete-option\",onClick:()=>handleDeleteMessage(selectedChat,deletePopup.msgIndex,true),children:\"Delete for all\"})]})]})}),modalImage&&/*#__PURE__*/_jsx(\"div\",{className:\"image-modal\",onClick:closeImageModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"image-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-modal-icon\",onClick:closeImageModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"img\",{src:modalImage,alt:\"Enlarged\",className:\"modal-image\"}),/*#__PURE__*/_jsx(\"a\",{href:modalImage,download:\"image.png\",className:\"download-link\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faDownload})})]})}),pdfModal.open&&/*#__PURE__*/_jsx(\"div\",{className:\"pdf-modal\",onClick:closePdfModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"pdf-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-pdf-modal\",onClick:closePdfModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"embed\",{src:pdfModal.src,type:\"application/pdf\",className:\"pdf-embed\"}),/*#__PURE__*/_jsx(\"a\",{href:pdfModal.src,download:pdfModal.fileName,className:\"download-pdf-icon\",title:\"Download PDF\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faDownload})})]})})]});};export default ChatListPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","FontAwesomeIcon","faArrowLeft","faEllipsisV","faEllipsisH","faDownload","faPaperclip","faPaperPlane","faFilePdf","faBan","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatListPage","chatList","setChatList","id","name","selectedChat","setSelectedChat","messages","setMessages","Friend1","user","message","time","typedMessage","setTypedMessage","replyMsg","setReplyMsg","fileInputRef","modalImage","setModalImage","pdfModal","setPdfModal","open","src","fileName","deletePopup","setDeletePopup","msgIndex","menuOpen","setMenuOpen","openMsgOptions","setOpenMsgOptions","menuRef","msgOptionsRef","socket","setSocket","getTimeStamp","Date","toLocaleTimeString","hour","minute","ws","WebSocket","onopen","console","log","onmessage","e","data","JSON","parse","prev","onerror","err","error","onclose","warn","close","handleSend","trim","newMessage","replyTo","send","stringify","handleUploadClick","_fileInputRef$current","current","click","handleFileChange","file","target","files","fileType","type","toLowerCase","timeStamp","reader","FileReader","onload","newMsg","startsWith","result","endsWith","readAsDataURL","value","openImageModal","closeImageModal","openPdfModal","closePdfModal","toggleMenu","toggleMsgOptions","index","openDeletePopup","handleDeletePopupClose","handleDeleteMessage","chatId","deleteForAll","arguments","length","undefined","updated","splice","originalMsg","handleReplyMessage","msg","handleClickOutside","contains","document","addEventListener","removeEventListener","className","children","to","icon","style","textAlign","map","chat","onClick","ref","filter","c","newMsgs","isMine","stopPropagation","alt","href","download","title","placeholder","onChange","onKeyDown","key","accept","display"],"sources":["/home/anmol/DEShaw-Project/subspot/frontend/src/components/ChatListPage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faArrowLeft,\n  faEllipsisV,\n  faEllipsisH,\n  faDownload,\n  faPaperclip,\n  faPaperPlane,\n  faFilePdf,\n  faBan,\n} from '@fortawesome/free-solid-svg-icons';\nimport './ChatListPage.css';\n\nconst ChatListPage = () => {\n  // Now we include both the value AND the setter\n  const [chatList, setChatList] = useState([\n    { id: 'Friend1', name: 'Friend1' },\n    { id: 'Friend2', name: 'Friend2' },\n    { id: 'Seller1', name: 'Seller1' },\n  ]);\n\n  const [selectedChat, setSelectedChat] = useState(null);\n\n  // Preload some messages for Friend1\n  const [messages, setMessages] = useState({\n    Friend1: [\n      {\n        user: 'Friend1',\n        message: 'Hello!',\n        time: '10:00 AM',\n      },\n      {\n        user: 'Me',\n        message: 'Hi there!',\n        time: '10:01 AM',\n      },\n    ],\n  });\n\n  const [typedMessage, setTypedMessage] = useState('');\n  const [replyMsg, setReplyMsg] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Modals / popups\n  const [modalImage, setModalImage] = useState(null);\n  const [pdfModal, setPdfModal] = useState({ open: false, src: '', fileName: '' });\n  const [deletePopup, setDeletePopup] = useState({ open: false, msgIndex: null });\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [openMsgOptions, setOpenMsgOptions] = useState(null);\n  const menuRef = useRef(null);\n  const msgOptionsRef = useRef(null);\n\n  // WebSocket for the current friend\n  const [socket, setSocket] = useState(null);\n\n  const getTimeStamp = () =>\n    new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n\n  // Open WebSocket whenever selectedChat changes\n  useEffect(() => {\n    if (!selectedChat) return;\n\n    const ws = new WebSocket(`ws://127.0.0.1:8000/ws/chat/${selectedChat}/`);\n\n    ws.onopen = () => {\n      console.log('WebSocket connected for room:', selectedChat);\n    };\n\n    ws.onmessage = (e) => {\n      const data = JSON.parse(e.data);\n      if (data.message) {\n        setMessages((prev) => ({\n          ...prev,\n          [selectedChat]: [...(prev[selectedChat] || []), data],\n        }));\n      }\n    };\n\n    ws.onerror = (err) => console.error('WebSocket error:', err);\n    ws.onclose = (e) => console.warn('WebSocket closed:', e);\n\n    setSocket(ws);\n\n    return () => ws.close();\n  }, [selectedChat]);\n\n  // Send a message\n  const handleSend = () => {\n    if (!socket || !typedMessage.trim() || !selectedChat) return;\n\n    const newMessage = {\n      user: 'Me',\n      message: typedMessage,\n      time: getTimeStamp(),\n    };\n\n    if (replyMsg) {\n      newMessage.replyTo = {\n        user: replyMsg.user || 'Them',\n        message: replyMsg.message,\n      };\n    }\n\n    setMessages((prev) => ({\n      ...prev,\n      [selectedChat]: [...(prev[selectedChat] || []), newMessage],\n    }));\n\n    socket.send(JSON.stringify({ message: typedMessage }));\n    setTypedMessage('');\n    setReplyMsg(null);\n  };\n\n  // File upload\n  const handleUploadClick = () => {\n    if (!selectedChat) return;\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (!file || !selectedChat) return;\n\n    const fileName = file.name;\n    const fileType = file.type.toLowerCase();\n    const timeStamp = getTimeStamp();\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      let newMsg = { user: 'Me', time: timeStamp };\n      if (fileType.startsWith('image/')) {\n        newMsg.type = 'image';\n        newMsg.src = reader.result;\n      } else if (fileType === 'application/pdf' || fileName.toLowerCase().endsWith('.pdf')) {\n        newMsg.type = 'pdf';\n        newMsg.src = reader.result;\n        newMsg.fileName = fileName;\n      } else {\n        newMsg.type = 'file';\n        newMsg.src = reader.result;\n        newMsg.fileName = fileName;\n      }\n      setMessages((prev) => ({\n        ...prev,\n        [selectedChat]: [...(prev[selectedChat] || []), newMsg],\n      }));\n    };\n    reader.readAsDataURL(file);\n    e.target.value = '';\n  };\n\n  // Image/PDF modals\n  const openImageModal = (src) => setModalImage(src);\n  const closeImageModal = () => setModalImage(null);\n  const openPdfModal = (src, fileName) => setPdfModal({ open: true, src, fileName });\n  const closePdfModal = () => setPdfModal({ open: false, src: '', fileName: '' });\n\n  // Header menu\n  const toggleMenu = () => setMenuOpen((prev) => !prev);\n\n  // Message options\n  const toggleMsgOptions = (index) =>\n    setOpenMsgOptions((prev) => (prev === index ? null : index));\n\n  const openDeletePopup = (index) => setDeletePopup({ open: true, msgIndex: index });\n  const handleDeletePopupClose = () => setDeletePopup({ open: false, msgIndex: null });\n\n  // Delete or reply\n  const handleDeleteMessage = (chatId, msgIndex, deleteForAll = false) => {\n    setMessages((prev) => {\n      const updated = [...(prev[chatId] || [])];\n      if (!deleteForAll) {\n        updated.splice(msgIndex, 1);\n      } else {\n        const originalMsg = updated[msgIndex];\n        updated[msgIndex] = {\n          ...originalMsg,\n          type: 'deleted',\n          message: 'You deleted this message',\n          replyTo: undefined,\n          src: undefined,\n          fileName: undefined,\n        };\n      }\n      return { ...prev, [chatId]: updated };\n    });\n    setDeletePopup({ open: false, msgIndex: null });\n    setOpenMsgOptions(null);\n  };\n\n  const handleReplyMessage = (msg) => {\n    setReplyMsg(msg);\n    setOpenMsgOptions(null);\n  };\n\n  // Close dropdowns if clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        setMenuOpen(false);\n      }\n      if (msgOptionsRef.current && !msgOptionsRef.current.contains(e.target)) {\n        setOpenMsgOptions(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div className=\"chats-container\">\n      <div className=\"chats-wrapper\">\n        {/* Left Panel */}\n        <div className=\"chats-left-panel\">\n          <header className=\"chats-left-header\">\n            <Link to=\"/dashboard\" className=\"back-link arrow-only\">\n              <FontAwesomeIcon icon={faArrowLeft} />\n            </Link>\n            <h2 className=\"chats-title\">Chat</h2>\n          </header>\n\n          <ul className=\"chat-list\" style={{ textAlign: 'center' }}>\n            {chatList.map((chat) => (\n              <li\n                key={chat.id}\n                className={`chat-item ${selectedChat === chat.id ? 'active' : ''}`}\n                onClick={() => setSelectedChat(chat.id)}\n              >\n                <span className=\"chat-link\">{chat.name}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n\n        {/* Right Panel */}\n        <div className={selectedChat ? 'chats-right-panel doodle' : 'chats-right-panel'}>\n          {selectedChat ? (\n            <div className=\"chat-content\">\n              <header className=\"chats-right-header\">\n                <span className=\"chat-contact-name\">{selectedChat}</span>\n                <div className=\"chat-header-actions\" ref={menuRef}>\n                  <FontAwesomeIcon\n                    icon={faEllipsisV}\n                    className=\"ellipsis-icon\"\n                    onClick={toggleMenu}\n                  />\n                  {menuOpen && (\n                    <div className=\"chat-menu-dropdown\">\n                      <div\n                        className=\"dropdown-item\"\n                        onClick={() => {\n                          setMessages((prev) => ({ ...prev, [selectedChat]: [] }));\n                          setMenuOpen(false);\n                        }}\n                      >\n                        Clear Chat\n                      </div>\n                      <div\n                        className=\"dropdown-item\"\n                        onClick={() => {\n                          // Remove friend from chatList and messages\n                          setChatList((prev) => prev.filter((c) => c.id !== selectedChat));\n                          setMessages((prev) => {\n                            const newMsgs = { ...prev };\n                            delete newMsgs[selectedChat];\n                            return newMsgs;\n                          });\n                          setSelectedChat(null);\n                          setMenuOpen(false);\n                        }}\n                      >\n                        Delete Chat\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </header>\n\n              <div className=\"chat-messages\" ref={msgOptionsRef}>\n                {(messages[selectedChat] || []).map((msg, index) => {\n                  const isMine = msg.user === 'Me';\n                  return (\n                    <div key={index} className={`message-wrapper ${isMine ? 'mine' : 'theirs'}`}>\n                      {isMine && (\n                        <div className=\"msg-options-container\" onClick={(e) => e.stopPropagation()}>\n                          <FontAwesomeIcon\n                            icon={faEllipsisH}\n                            className=\"msg-options-icon\"\n                            onClick={() => toggleMsgOptions(index)}\n                          />\n                          {openMsgOptions === index && (\n                            <div\n                              className=\"msg-options-dropdown\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <div className=\"msg-option-item\" onClick={() => handleReplyMessage(msg)}>\n                                Reply\n                              </div>\n                              <div className=\"msg-option-item\" onClick={() => openDeletePopup(index)}>\n                                Delete\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      )}\n\n                      <div className={`message-bubble ${isMine ? 'mine' : 'theirs'}`}>\n                        {msg.replyTo && (\n                          <div className=\"mini-reply-bubble\">\n                            <span className=\"mini-reply-sender\">{msg.replyTo.user}</span>\n                            <span className=\"mini-reply-text\">{msg.replyTo.message}</span>\n                          </div>\n                        )}\n\n                        {msg.type === 'deleted' ? (\n                          <>\n                            <div className=\"message-text deleted\">\n                              <FontAwesomeIcon icon={faBan} className=\"deleted-icon\" />\n                              {msg.message}\n                            </div>\n                            <div className=\"message-time\">{msg.time}</div>\n                          </>\n                        ) : msg.type === 'image' ? (\n                          <>\n                            <img\n                              src={msg.src}\n                              alt=\"sent\"\n                              className=\"message-image\"\n                              onClick={() => openImageModal(msg.src)}\n                            />\n                            <div className=\"message-time\">{msg.time}</div>\n                          </>\n                        ) : msg.type === 'pdf' ? (\n                          <>\n                            <div\n                              className=\"pdf-preview\"\n                              onClick={() => openPdfModal(msg.src, msg.fileName)}\n                            >\n                              <FontAwesomeIcon icon={faFilePdf} className=\"pdf-icon\" />\n                              <span className=\"pdf-filename\">{msg.fileName}</span>\n                            </div>\n                            <div className=\"message-time\">{msg.time}</div>\n                          </>\n                        ) : msg.type === 'file' ? (\n                          <>\n                            <a\n                              href={msg.src}\n                              download={msg.fileName}\n                              className=\"file-link\"\n                              title=\"Download File\"\n                            >\n                              {msg.fileName}\n                            </a>\n                            <div className=\"message-time\">{msg.time}</div>\n                          </>\n                        ) : (\n                          <>\n                            <div className=\"message-text\">{msg.message}</div>\n                            <div className=\"message-time\">{msg.time}</div>\n                          </>\n                        )}\n                      </div>\n\n                      {!isMine && (\n                        <div className=\"msg-options-container\" onClick={(e) => e.stopPropagation()}>\n                          <FontAwesomeIcon\n                            icon={faEllipsisH}\n                            className=\"msg-options-icon\"\n                            onClick={() => toggleMsgOptions(index)}\n                          />\n                          {openMsgOptions === index && (\n                            <div\n                              className=\"msg-options-dropdown\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <div className=\"msg-option-item\" onClick={() => handleReplyMessage(msg)}>\n                                Reply\n                              </div>\n                              <div className=\"msg-option-item\" onClick={() => openDeletePopup(index)}>\n                                Delete\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n\n              {replyMsg && (\n                <div className=\"reply-bubble\">\n                  <span className=\"reply-text\">{replyMsg.message}</span>\n                  <span className=\"cancel-reply\" onClick={() => setReplyMsg(null)}>\n                    &times;\n                  </span>\n                </div>\n              )}\n\n              <div className=\"chats-input-area\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Type a message...\"\n                  value={typedMessage}\n                  onChange={(e) => setTypedMessage(e.target.value)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter') handleSend();\n                  }}\n                />\n                <FontAwesomeIcon icon={faPaperPlane} className=\"send-icon\" onClick={handleSend} />\n                <input\n                  type=\"file\"\n                  accept=\"image/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                  ref={fileInputRef}\n                  style={{ display: 'none' }}\n                  onChange={handleFileChange}\n                />\n                <FontAwesomeIcon icon={faPaperclip} className=\"upload-icon\" onClick={handleUploadClick} />\n              </div>\n            </div>\n          ) : (\n            <div className=\"chat-placeholder\">Start Messaging</div>\n          )}\n        </div>\n      </div>\n\n      {deletePopup.open && (\n        <div className=\"delete-popup-modal\" onClick={handleDeletePopupClose}>\n          <div className=\"delete-popup-content\" onClick={(e) => e.stopPropagation()}>\n            <p>Delete message:</p>\n            <div className=\"delete-popup-options\">\n              <span\n                className=\"delete-option\"\n                onClick={() => handleDeleteMessage(selectedChat, deletePopup.msgIndex, false)}\n              >\n                Delete for me\n              </span>\n              <span\n                className=\"delete-option\"\n                onClick={() => handleDeleteMessage(selectedChat, deletePopup.msgIndex, true)}\n              >\n                Delete for all\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {modalImage && (\n        <div className=\"image-modal\" onClick={closeImageModal}>\n          <div className=\"image-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <span className=\"close-modal-icon\" onClick={closeImageModal}>\n              &times;\n            </span>\n            <img src={modalImage} alt=\"Enlarged\" className=\"modal-image\" />\n            <a href={modalImage} download=\"image.png\" className=\"download-link\">\n              <FontAwesomeIcon icon={faDownload} />\n            </a>\n          </div>\n        </div>\n      )}\n\n      {pdfModal.open && (\n        <div className=\"pdf-modal\" onClick={closePdfModal}>\n          <div className=\"pdf-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <span className=\"close-pdf-modal\" onClick={closePdfModal}>\n              &times;\n            </span>\n            <embed src={pdfModal.src} type=\"application/pdf\" className=\"pdf-embed\" />\n            <a\n              href={pdfModal.src}\n              download={pdfModal.fileName}\n              className=\"download-pdf-icon\"\n              title=\"Download PDF\"\n            >\n              <FontAwesomeIcon icon={faDownload} />\n            </a>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatListPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}