{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Market.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCircleUser,faSearch,faTrash}from'@fortawesome/free-solid-svg-icons';import{Link,useNavigate}from'react-router-dom';import ChatIcon from'./ChatIcon';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function parseDurationToDays(durationStr){switch(durationStr){case'1 month':return 30;case'2 months':return 60;case'3 months':return 90;case'6 months':return 180;case'1 year':return 365;default:return 30;}}function Market(){// Track which tab is active: \"buy\", \"sell\", or \"expired\"\nconst[activeTab,setActiveTab]=useState('buy');// For searching subscriptions (Buy tab)\nconst[searchTerm,setSearchTerm]=useState('');// Show/hide the Sell form\nconst[showSellForm,setShowSellForm]=useState(false);// Show/hide the Sold History\nconst[showSoldHistory,setShowSoldHistory]=useState(false);// For the \"Buy\" modal\nconst[showBuyModal,setShowBuyModal]=useState(false);const[selectedItem,setSelectedItem]=useState(null);// Use navigate hook\nconst navigate=useNavigate();// <-- used for programmatic navigation\n//user dropdown\nconst[isDropdownOpen,setIsDropdownOpen]=useState(false);const[userInfo,setUserInfo]=useState({username:'',email:''});const API_BASE_URL='http://localhost:8000/subspot/';useEffect(()=>{fetch(`${API_BASE_URL}auth/user/`,{credentials:'include'}).then(res=>{if(res.status===401){navigate('/');return Promise.reject('Not authenticated');}return res.json();}).then(data=>setUserInfo({username:data.username,email:data.email})).catch(err=>console.error('Error fetching user info:',err));},[navigate]);const handleLogout=()=>{fetch(`${API_BASE_URL}auth/logout/`,{method:'POST',credentials:'include'}).then(()=>{setIsDropdownOpen(false);navigate('/');}).catch(err=>console.error('Logout error:',err));};const toggleDropdown=()=>setIsDropdownOpen(!isDropdownOpen);// // Example icons\n// const subscriptionIcons = {\n//   'Spotify Premium': 'https://img.icons8.com/fluency/48/spotify.png',\n//   'Netflix': 'https://img.icons8.com/color/48/netflix-desktop-app.png',\n//   'Amazon Prime': 'https://img.icons8.com/color/48/amazon.png',\n//   'YouTube Premium': 'https://img.icons8.com/color/48/youtube-play.png'\n// };\n// // Example user subscriptions (for the \"Add to Sell\" form)\n// const [userSubscriptions] = useState([\n//   { id: 1, name: 'Spotify Premium', duration: '1 month' },\n//   { id: 2, name: 'Netflix', duration: '2 months' },\n//   { id: 3, name: 'Coursera', duration: '1 month' },\n//   { id: 4, name: 'YouTube Premium', duration: '3 months' },\n//   { id: 5, name: 'iCloud', duration: '1 month' }\n// ]);\n// // Sample items in the Buy tab\n// const subscriptionItems = [\n//   { id: 1, name: 'Spotify Premium', duration: '1 month', price: 149 },\n//   { id: 2, name: 'Netflix', duration: '2 months', price: 299 },\n//   { id: 3, name: 'Amazon Prime', duration: '1 month', price: 129 },\n//   { id: 4, name: 'YouTube Premium', duration: '2 months', price: 249 },\n// ];\n// // Items currently for sale (Sell tab)\n// const [sellItems, setSellItems] = useState([\n//   {\n//     id: 101,\n//     name: 'YouTube Premium',\n//     duration: '2 months ago',\n//     price: 599,\n//     validUntil: null,\n//   },\n//   {\n//     id: 102,\n//     name: 'Spotify Premium',\n//     duration: '1 month ago',\n//     price: 199,\n//     validUntil: null,\n//   },\n// ]);\nconst[subscriptionItems,setSubscriptionItems]=useState([]);const[sellItems,setSellItems]=useState([]);const[soldItems,setSoldItems]=useState([]);const[expiredItems,setExpiredItems]=useState([]);const[userSubscriptions,setUserSubscriptions]=useState([]);// Fetch data when component mounts and tab changes\nuseEffect(()=>{if(activeTab==='buy'){fetchAvailableListings();}else if(activeTab==='sell'){fetchUserUnsoldListings();}else if(activeTab==='expired'){fetchExpiredListings();}},[activeTab]);// Also fetch user's subscriptions for the sell form\nuseEffect(()=>{fetch(`${API_BASE_URL}subscriptions/`,{credentials:'include'}).then(res=>res.json()).then(data=>{// Transform subscription data for the dropdown\nconst formattedSubs=data.map(sub=>({id:sub.id,name:sub.name,duration:sub.billing_cycle==='monthly'?'1 month':sub.billing_cycle==='quarterly'?'3 months':'1 year'}));setUserSubscriptions(formattedSubs);}).catch(err=>console.error('Error fetching user subscriptions:',err));},[]);// Fetch available listings for Buy tab\nconst fetchAvailableListings=()=>{fetch(`${API_BASE_URL}listings/`,{credentials:'include'}).then(res=>res.json()).then(data=>{setSubscriptionItems(data);}).catch(err=>console.error('Error fetching listings:',err));};// Fetch user's unsold listings for Sell tab\nconst fetchUserUnsoldListings=()=>{fetch(`${API_BASE_URL}unsold-listings/`,{credentials:'include'}).then(res=>res.json()).then(data=>{setSellItems(data);}).catch(err=>console.error('Error fetching unsold listings:',err));// Also fetch sold listings for history\nfetch(`${API_BASE_URL}sold-listings/`,{credentials:'include'}).then(res=>res.json()).then(data=>{setSoldItems(data);}).catch(err=>console.error('Error fetching sold listings:',err));};// Fetch expired listings\nconst fetchExpiredListings=()=>{fetch(`${API_BASE_URL}unsold-expired-listings/`,{credentials:'include'}).then(res=>res.json()).then(data=>{setExpiredItems(data);}).catch(err=>console.error('Error fetching expired listings:',err));};// Mark subscription as sold\nconst handleSold=id=>{const formData=new FormData();formData.append('listing_id',id);fetch(`${API_BASE_URL}mark-sold/`,{method:'POST',credentials:'include',body:formData}).then(res=>res.json()).then(data=>{if(data.message){// Remove from sell items and refresh listings\nfetchUserUnsoldListings();}}).catch(err=>console.error('Error marking as sold:',err));};// Save the updated price\nconst handleSavePrice=id=>{const formData=new FormData();formData.append('listing_id',id);formData.append('new_price',tempPrice);fetch(`${API_BASE_URL}edit-listing-price/`,{method:'POST',credentials:'include',body:formData}).then(res=>res.json()).then(data=>{if(data.message){// Update the UI\nsetSellItems(prev=>prev.map(item=>{if(item.id===id){return{...item,price:parseInt(tempPrice,10)||item.price};}return item;}));}}).catch(err=>console.error('Error updating price:',err));setEditingPriceId(null);setTempPrice('');};// Delete a sell item\nconst handleDeleteSellItem=id=>{fetch(`${API_BASE_URL}listings/`,{method:'DELETE',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify({listing_id:id})}).then(res=>res.json()).then(data=>{if(data.message){// Remove from UI\nsetSellItems(prev=>prev.filter(item=>item.id!==id));}}).catch(err=>console.error('Error deleting listing:',err));};// Handle subscription selection in Sell form\nconst handleSelectedSubscriptionChange=e=>{const selectedId=e.target.value;setSelectedDashboardSub(selectedId);};// Submit the Sell form\nconst handleSellFormSubmit=e=>{e.preventDefault();if(!selectedDashboardSub||!sellPrice){alert(\"Please select a subscription and enter a selling price.\");return;}const urlEncodedData=new URLSearchParams();urlEncodedData.append('subscription_id',selectedDashboardSub);urlEncodedData.append('price',sellPrice);fetch(`${API_BASE_URL}listings/`,{method:'POST',credentials:'include',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:urlEncodedData.toString()}).then(res=>{if(!res.ok){throw new Error(`HTTP error! status: ${res.status}`);}return res.json();}).then(data=>{if(data.message&&data.message.includes('successfully')){// Refresh the listings\nfetchUserUnsoldListings();// Reset form\nsetSelectedDashboardSub('');setSellPrice('');setShowSellForm(false);}else{alert(data.message||'Failed to create listing');}}).catch(err=>{console.error('Error creating listing:',err);alert('An error occurred while creating the listing.');});};// // Items that expired\n// const [expiredItems, setExpiredItems] = useState([\n//   {\n//     id: 201,\n//     name: 'Amazon Prime',\n//     price: 129,\n//     validUntil: null,\n//   },\n//   {\n//     id: 202,\n//     name: 'Netflix',\n//     price: 199,\n//     validUntil: null,\n//   },\n// ]);\n// For the Sell form\nconst[selectedDashboardSub,setSelectedDashboardSub]=useState('');const[sellPrice,setSellPrice]=useState('');// ----- NEW STATES & FUNCTIONS for inline price editing -----\nconst[editingPriceId,setEditingPriceId]=useState(null);const[tempPrice,setTempPrice]=useState('');// Start editing a particular subscription’s price\nconst handlePriceEdit=(id,currentPrice)=>{setEditingPriceId(id);setTempPrice(String(currentPrice));// keep it as string for input\n};// Cancel price editing\nconst handleCancelPriceEdit=()=>{setEditingPriceId(null);setTempPrice('');};// -----------------------------------------------------------\n// Filter items based on search (Buy tab)\nconst filteredItems=subscriptionItems.filter(item=>item.name.toLowerCase().includes(searchTerm.toLowerCase()));// Handle switching between tabs\nconst handleTabChange=tab=>{setActiveTab(tab);if(tab!=='sell'){setShowSellForm(false);setShowSoldHistory(false);}};// Toggle the sell form\nconst handleAddSubscriptionClick=()=>{setShowSellForm(prev=>!prev);setShowSoldHistory(false);};// Toggle the sold history\nconst handleSellHistoryClick=()=>{setShowSoldHistory(prev=>!prev);setShowSellForm(false);};// Handle \"Buy\" button\nconst handleBuyClick=item=>{setSelectedItem(item);setShowBuyModal(true);};// Close the Buy modal\nconst handleCloseBuyModal=()=>{setShowBuyModal(false);setSelectedItem(null);};// Single button: Contact Seller\nconst handleContactSeller=()=>{// Navigate to the chat page (replace '/chat' with your actual route)\nnavigate('/chats');handleCloseBuyModal();};return/*#__PURE__*/_jsxs(\"div\",{className:\"market-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"market-header\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"market-nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"nav-link\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/market\",className:\"nav-link active\",children:\"Market\"}),/*#__PURE__*/_jsx(Link,{to:\"/friends\",className:\"nav-link\",children:\"Friends\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-icon\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCircleUser,onClick:toggleDropdown}),isDropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-dropdown\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:userInfo.username})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:userInfo.email})]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'20px'},children:/*#__PURE__*/_jsx(ChatIcon,{})})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"market-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:`toggle-button ${activeTab==='buy'?'active':''}`,onClick:()=>handleTabChange('buy'),children:\"Buy Subscription\"}),/*#__PURE__*/_jsx(\"button\",{className:`toggle-button ${activeTab==='sell'?'active':''}`,onClick:()=>handleTabChange('sell'),children:\"Sell Subscription\"}),/*#__PURE__*/_jsx(\"button\",{className:`toggle-button ${activeTab==='expired'?'active':''}`,onClick:()=>handleTabChange('expired'),children:\"Expired Subscriptions\"})]}),activeTab==='buy'&&/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]}),activeTab==='buy'&&/*#__PURE__*/_jsx(\"div\",{className:\"buy-section\",children:filteredItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No subscriptions are available for purchase.\"}):filteredItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-icon-container\",children:item.logo?/*#__PURE__*/_jsx(\"img\",{src:item.logo,alt:item.name,className:\"subscription-icon\",onError:e=>{e.target.onerror=null;e.target.src=\"https://via.placeholder.com/48?text=\"+item.name.charAt(0);}}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon-space\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-name\",children:item.name}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-duration\",children:item.duration})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"subscription-price\",children:[\"Rs. \",item.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handleBuyClick(item),children:\"Buy\"})]})]},item.id))}),activeTab==='sell'&&/*#__PURE__*/_jsxs(\"div\",{className:\"sell-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sell-history\",children:sellItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-icon-container\",children:item.logo?/*#__PURE__*/_jsx(\"img\",{src:item.logo,alt:item.name,className:\"subscription-icon\",onError:e=>{e.target.onerror=null;e.target.src=\"https://via.placeholder.com/48?text=\"+item.name.charAt(0);}}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon-space\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-name\",children:item.name}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-duration\",children:item.duration})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-right\",children:[editingPriceId===item.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:tempPrice,onChange:e=>setTempPrice(e.target.value),style:{width:'70px',borderRadius:'4px',padding:'3px 5px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handleSavePrice(item.id),children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:handleCancelPriceEdit,children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"subscription-price\",children:[\"Rs. \",item.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handlePriceEdit(item.id,item.price),children:\"Edit\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handleSold(item.id),children:\"Sold\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash,className:\"delete-icon\",onClick:()=>handleDeleteSellItem(item.id)})]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:`sell-buttons-container ${!showSellForm?'two-buttons':'one-button'}`,children:[!showSellForm&&/*#__PURE__*/_jsx(\"button\",{className:\"action-button add-subscription-button\",onClick:handleAddSubscriptionClick,children:\"Add to Sell\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button sell-history-button\",onClick:handleSellHistoryClick,children:\"History\"})]}),showSellForm&&/*#__PURE__*/_jsxs(\"form\",{className:\"sell-form\",onSubmit:handleSellFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Subscription\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"selectedSub\",value:selectedDashboardSub,onChange:handleSelectedSubscriptionChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select from your subscriptions\"}),userSubscriptions.map(sub=>/*#__PURE__*/_jsx(\"option\",{value:sub.id,children:sub.name},sub.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Selling Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Enter selling price\",value:sellPrice,onChange:e=>setSellPrice(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button sell-button\",type:\"submit\",children:\"Sell Subscription\"})]}),showSoldHistory&&/*#__PURE__*/_jsxs(\"div\",{className:\"sold-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sold History\"}),soldItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No subscriptions sold yet.\"}):soldItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-icon-container\",children:item.logo?/*#__PURE__*/_jsx(\"img\",{src:item.logo,alt:item.name,className:\"subscription-icon\",onError:e=>{e.target.onerror=null;e.target.src=\"https://via.placeholder.com/48?text=\"+item.name.charAt(0);}}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon-space\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-name\",children:item.name}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-duration\",children:item.duration})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-right\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"subscription-price\",children:[\"Rs. \",item.price]})})]},item.id))]})]}),activeTab==='expired'&&/*#__PURE__*/_jsx(\"div\",{className:\"sell-section\",children:expiredItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No subscriptions have expired yet.\"}):expiredItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subscription-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subscription-icon-container\",children:item.logo?/*#__PURE__*/_jsx(\"img\",{src:item.logo,alt:item.name,className:\"subscription-icon\",onError:e=>{e.target.onerror=null;e.target.src=\"https://via.placeholder.com/48?text=\"+item.name.charAt(0);}}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon-space\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-text\",children:/*#__PURE__*/_jsx(\"div\",{className:\"subscription-name\",children:item.name})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-right\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"subscription-price\",children:[\"Rs. \",item.price]})})]},item.id))})]}),showBuyModal&&selectedItem&&/*#__PURE__*/_jsx(\"div\",{className:\"buy-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"buy-modal-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"buy-modal-close\",onClick:handleCloseBuyModal,children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Purchase \",selectedItem.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",selectedItem.duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: Rs. \",selectedItem.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"buy-modal-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:handleContactSeller,children:\"Contact Seller\"})})]})})]});}export default Market;","map":{"version":3,"names":["React","useState","useEffect","FontAwesomeIcon","faCircleUser","faSearch","faTrash","Link","useNavigate","ChatIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","parseDurationToDays","durationStr","Market","activeTab","setActiveTab","searchTerm","setSearchTerm","showSellForm","setShowSellForm","showSoldHistory","setShowSoldHistory","showBuyModal","setShowBuyModal","selectedItem","setSelectedItem","navigate","isDropdownOpen","setIsDropdownOpen","userInfo","setUserInfo","username","email","API_BASE_URL","fetch","credentials","then","res","status","Promise","reject","json","data","catch","err","console","error","handleLogout","method","toggleDropdown","subscriptionItems","setSubscriptionItems","sellItems","setSellItems","soldItems","setSoldItems","expiredItems","setExpiredItems","userSubscriptions","setUserSubscriptions","fetchAvailableListings","fetchUserUnsoldListings","fetchExpiredListings","formattedSubs","map","sub","id","name","duration","billing_cycle","handleSold","formData","FormData","append","body","message","handleSavePrice","tempPrice","prev","item","price","parseInt","setEditingPriceId","setTempPrice","handleDeleteSellItem","headers","JSON","stringify","listing_id","filter","handleSelectedSubscriptionChange","e","selectedId","target","value","setSelectedDashboardSub","handleSellFormSubmit","preventDefault","selectedDashboardSub","sellPrice","alert","urlEncodedData","URLSearchParams","toString","ok","Error","includes","setSellPrice","editingPriceId","handlePriceEdit","currentPrice","String","handleCancelPriceEdit","filteredItems","toLowerCase","handleTabChange","tab","handleAddSubscriptionClick","handleSellHistoryClick","handleBuyClick","handleCloseBuyModal","handleContactSeller","className","children","to","icon","onClick","style","marginLeft","type","placeholder","onChange","length","logo","src","alt","onError","onerror","charAt","width","borderRadius","padding","onSubmit","required","disabled"],"sources":["/home/anmol/DEShaw-Project/subspot/frontend/src/components/Market.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Market.css';  \nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircleUser, faSearch, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { Link, useNavigate } from 'react-router-dom';  \nimport ChatIcon from './ChatIcon'; \n\n\nfunction parseDurationToDays(durationStr) {\n  switch (durationStr) {\n    case '1 month':\n      return 30;\n    case '2 months':\n      return 60;\n    case '3 months':\n      return 90;\n    case '6 months':\n      return 180;\n    case '1 year':\n      return 365;\n    default:\n      return 30; \n  }\n}\n\nfunction Market() {\n  // Track which tab is active: \"buy\", \"sell\", or \"expired\"\n  const [activeTab, setActiveTab] = useState('buy');\n  // For searching subscriptions (Buy tab)\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Show/hide the Sell form\n  const [showSellForm, setShowSellForm] = useState(false);\n  // Show/hide the Sold History\n  const [showSoldHistory, setShowSoldHistory] = useState(false);\n\n  // For the \"Buy\" modal\n  const [showBuyModal, setShowBuyModal] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n\n  // Use navigate hook\n  const navigate = useNavigate();  // <-- used for programmatic navigation\n\n  //user dropdown\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [userInfo, setUserInfo] = useState({ username: '', email: '' });\n  const API_BASE_URL = 'http://localhost:8000/subspot/';\n\n  useEffect(() => {\n    fetch(`${API_BASE_URL}auth/user/`, { credentials: 'include' })\n      .then(res => {\n        if (res.status === 401) {\n          navigate('/');\n          return Promise.reject('Not authenticated');\n        }\n        return res.json();\n      })\n      .then(data => setUserInfo({ username: data.username, email: data.email }))\n      .catch(err => console.error('Error fetching user info:', err));\n  }, [navigate]);\n\n  const handleLogout = () => {\n    fetch(`${API_BASE_URL}auth/logout/`, {\n      method: 'POST',\n      credentials: 'include',\n    })\n      .then(() => {\n        setIsDropdownOpen(false);\n        navigate('/');\n      })\n      .catch(err => console.error('Logout error:', err));\n  };\n\n\n\n\n  const toggleDropdown = () => setIsDropdownOpen(!isDropdownOpen);\n\n  // // Example icons\n  // const subscriptionIcons = {\n  //   'Spotify Premium': 'https://img.icons8.com/fluency/48/spotify.png',\n  //   'Netflix': 'https://img.icons8.com/color/48/netflix-desktop-app.png',\n  //   'Amazon Prime': 'https://img.icons8.com/color/48/amazon.png',\n  //   'YouTube Premium': 'https://img.icons8.com/color/48/youtube-play.png'\n  // };\n\n  // // Example user subscriptions (for the \"Add to Sell\" form)\n  // const [userSubscriptions] = useState([\n  //   { id: 1, name: 'Spotify Premium', duration: '1 month' },\n  //   { id: 2, name: 'Netflix', duration: '2 months' },\n  //   { id: 3, name: 'Coursera', duration: '1 month' },\n  //   { id: 4, name: 'YouTube Premium', duration: '3 months' },\n  //   { id: 5, name: 'iCloud', duration: '1 month' }\n  // ]);\n\n  // // Sample items in the Buy tab\n  // const subscriptionItems = [\n  //   { id: 1, name: 'Spotify Premium', duration: '1 month', price: 149 },\n  //   { id: 2, name: 'Netflix', duration: '2 months', price: 299 },\n  //   { id: 3, name: 'Amazon Prime', duration: '1 month', price: 129 },\n  //   { id: 4, name: 'YouTube Premium', duration: '2 months', price: 249 },\n  // ];\n\n  // // Items currently for sale (Sell tab)\n  // const [sellItems, setSellItems] = useState([\n  //   {\n  //     id: 101,\n  //     name: 'YouTube Premium',\n  //     duration: '2 months ago',\n  //     price: 599,\n  //     validUntil: null,\n  //   },\n  //   {\n  //     id: 102,\n  //     name: 'Spotify Premium',\n  //     duration: '1 month ago',\n  //     price: 199,\n  //     validUntil: null,\n  //   },\n  // ]);\n\n  const [subscriptionItems, setSubscriptionItems] = useState([]);\n  const [sellItems, setSellItems] = useState([]);\n  const [soldItems, setSoldItems] = useState([]);\n  const [expiredItems, setExpiredItems] = useState([]);\n  const [userSubscriptions, setUserSubscriptions] = useState([]);\n  \n  // Fetch data when component mounts and tab changes\n  useEffect(() => {\n    if (activeTab === 'buy') {\n      fetchAvailableListings();\n    } else if (activeTab === 'sell') {\n      fetchUserUnsoldListings();\n    } else if (activeTab === 'expired') {\n      fetchExpiredListings();\n    }\n  }, [activeTab]);\n\n  // Also fetch user's subscriptions for the sell form\n  useEffect(() => {\n    fetch(`${API_BASE_URL}subscriptions/`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        // Transform subscription data for the dropdown\n        const formattedSubs = data.map(sub => ({\n          id: sub.id,\n          name: sub.name,\n          duration: sub.billing_cycle === 'monthly' ? '1 month' : \n                    sub.billing_cycle === 'quarterly' ? '3 months' : '1 year'\n        }));\n        setUserSubscriptions(formattedSubs);\n      })\n      .catch(err => console.error('Error fetching user subscriptions:', err));\n  }, []);\n\n\n  // Fetch available listings for Buy tab\n  const fetchAvailableListings = () => {\n    fetch(`${API_BASE_URL}listings/`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        setSubscriptionItems(data);\n      })\n      .catch(err => console.error('Error fetching listings:', err));\n  };\n\n  // Fetch user's unsold listings for Sell tab\n  const fetchUserUnsoldListings = () => {\n    fetch(`${API_BASE_URL}unsold-listings/`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        setSellItems(data);\n      })\n      .catch(err => console.error('Error fetching unsold listings:', err));\n\n    // Also fetch sold listings for history\n    fetch(`${API_BASE_URL}sold-listings/`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        setSoldItems(data);\n      })\n      .catch(err => console.error('Error fetching sold listings:', err));\n  };\n\n  // Fetch expired listings\n  const fetchExpiredListings = () => {\n    fetch(`${API_BASE_URL}unsold-expired-listings/`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(data => {\n        setExpiredItems(data);\n      })\n      .catch(err => console.error('Error fetching expired listings:', err));\n  };\n\n  // Mark subscription as sold\n  const handleSold = (id) => {\n    const formData = new FormData();\n    formData.append('listing_id', id);\n\n    fetch(`${API_BASE_URL}mark-sold/`, {\n      method: 'POST',\n      credentials: 'include',\n      body: formData\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.message) {\n          // Remove from sell items and refresh listings\n          fetchUserUnsoldListings();\n        }\n      })\n      .catch(err => console.error('Error marking as sold:', err));\n  };\n\n  // Save the updated price\n  const handleSavePrice = (id) => {\n    const formData = new FormData();\n    formData.append('listing_id', id);\n    formData.append('new_price', tempPrice);\n\n    fetch(`${API_BASE_URL}edit-listing-price/`, {\n      method: 'POST',\n      credentials: 'include',\n      body: formData\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.message) {\n          // Update the UI\n          setSellItems(prev =>\n            prev.map(item => {\n              if (item.id === id) {\n                return { ...item, price: parseInt(tempPrice, 10) || item.price };\n              }\n              return item;\n            })\n          );\n        }\n      })\n      .catch(err => console.error('Error updating price:', err));\n\n    setEditingPriceId(null);\n    setTempPrice('');\n  };\n\n  // Delete a sell item\n  const handleDeleteSellItem = (id) => {\n    fetch(`${API_BASE_URL}listings/`, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ listing_id: id })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.message) {\n          // Remove from UI\n          setSellItems(prev => prev.filter(item => item.id !== id));\n        }\n      })\n      .catch(err => console.error('Error deleting listing:', err));\n  };\n\n  \n\n\n  // Handle subscription selection in Sell form\nconst handleSelectedSubscriptionChange = (e) => {\n  const selectedId = e.target.value;\n  setSelectedDashboardSub(selectedId);\n};\n\n// Submit the Sell form\nconst handleSellFormSubmit = (e) => {\n  e.preventDefault();\n  if (!selectedDashboardSub || !sellPrice) {\n    alert(\"Please select a subscription and enter a selling price.\");\n    return;\n  }\n\n  const urlEncodedData = new URLSearchParams();\n  urlEncodedData.append('subscription_id', selectedDashboardSub);\n  urlEncodedData.append('price', sellPrice);\n\n  fetch(`${API_BASE_URL}listings/`, {\n    method: 'POST',\n    credentials: 'include',\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    body: urlEncodedData.toString()\n  })\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .then(data => {\n      if (data.message && data.message.includes('successfully')) {\n        // Refresh the listings\n        fetchUserUnsoldListings();\n        // Reset form\n        setSelectedDashboardSub('');\n        setSellPrice('');\n        setShowSellForm(false);\n      } else {\n        alert(data.message || 'Failed to create listing');\n      }\n    })\n    .catch(err => {\n      console.error('Error creating listing:', err);\n      alert('An error occurred while creating the listing.');\n    });\n};\n\n\n\n\n\n\n\n  // // Items that expired\n  // const [expiredItems, setExpiredItems] = useState([\n  //   {\n  //     id: 201,\n  //     name: 'Amazon Prime',\n  //     price: 129,\n  //     validUntil: null,\n  //   },\n  //   {\n  //     id: 202,\n  //     name: 'Netflix',\n  //     price: 199,\n  //     validUntil: null,\n  //   },\n  // ]);\n\n  // For the Sell form\n  const [selectedDashboardSub, setSelectedDashboardSub] = useState('');\n  const [sellPrice, setSellPrice] = useState('');\n\n  // ----- NEW STATES & FUNCTIONS for inline price editing -----\n  const [editingPriceId, setEditingPriceId] = useState(null);\n  const [tempPrice, setTempPrice] = useState('');\n\n  // Start editing a particular subscription’s price\n  const handlePriceEdit = (id, currentPrice) => {\n    setEditingPriceId(id);\n    setTempPrice(String(currentPrice)); // keep it as string for input\n  };\n\n  // Cancel price editing\n  const handleCancelPriceEdit = () => {\n    setEditingPriceId(null);\n    setTempPrice('');\n  };\n  // -----------------------------------------------------------\n\n  // Filter items based on search (Buy tab)\n  const filteredItems = subscriptionItems.filter(item =>\n    item.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Handle switching between tabs\n  const handleTabChange = (tab) => {\n    setActiveTab(tab);\n    if (tab !== 'sell') {\n      setShowSellForm(false);\n      setShowSoldHistory(false);\n    }\n  };\n\n\n  // Toggle the sell form\n  const handleAddSubscriptionClick = () => {\n    setShowSellForm((prev) => !prev);\n    setShowSoldHistory(false);\n  };\n\n  // Toggle the sold history\n  const handleSellHistoryClick = () => {\n    setShowSoldHistory((prev) => !prev);\n    setShowSellForm(false);\n  };\n\n  \n  // Handle \"Buy\" button\n  const handleBuyClick = (item) => {\n    setSelectedItem(item);\n    setShowBuyModal(true);\n  };\n\n  // Close the Buy modal\n  const handleCloseBuyModal = () => {\n    setShowBuyModal(false);\n    setSelectedItem(null);\n  };\n\n  // Single button: Contact Seller\n  const handleContactSeller = () => {\n    // Navigate to the chat page (replace '/chat' with your actual route)\n    navigate('/chats');\n    handleCloseBuyModal();\n  };\n\n  \n  return (\n    <div className=\"market-container\">\n      {/* Header / Navbar */}\n      <header className=\"market-header\">\n        <nav className=\"market-nav\">\n          <Link to=\"/dashboard\" className=\"nav-link\">Dashboard</Link>\n          <Link to=\"/market\" className=\"nav-link active\">Market</Link>\n          <Link to=\"/friends\" className=\"nav-link\">Friends</Link>\n          <div className=\"user-icon\">\n            <FontAwesomeIcon icon={faCircleUser} onClick={toggleDropdown} />\n            {isDropdownOpen && (\n              <div className=\"user-dropdown\">\n                <p>Username: <span className=\"value\">{userInfo.username}</span></p>\n                <p>Email: <span className=\"value\">{userInfo.email}</span></p>\n                <button className=\"logout-button\" onClick={handleLogout}>Logout</button>\n              </div>\n            )}\n          </div>\n          {/* ChatIcon added next to user icon */}\n          <div style={{ marginLeft: '20px' }}>\n            <ChatIcon />\n          </div>\n        </nav>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"market-content\">\n        {/* Toggle Buttons */}\n        <div className=\"subscription-toggle\">\n          <button\n            className={`toggle-button ${activeTab === 'buy' ? 'active' : ''}`}\n            onClick={() => handleTabChange('buy')}\n          >\n            Buy Subscription\n          </button>\n          <button\n            className={`toggle-button ${activeTab === 'sell' ? 'active' : ''}`}\n            onClick={() => handleTabChange('sell')}\n          >\n            Sell Subscription\n          </button>\n          <button\n            className={`toggle-button ${activeTab === 'expired' ? 'active' : ''}`}\n            onClick={() => handleTabChange('expired')}\n          >\n            Expired Subscriptions\n          </button>\n        </div>\n\n        {/* Search Bar (only for Buy) */}\n        {activeTab === 'buy' && (\n          <div className=\"search-bar\">\n            <FontAwesomeIcon icon={faSearch} />\n            <input\n              type=\"text\"\n              placeholder=\"Search\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n          </div>\n        )}\n\n        {/* Buy Tab */}\n        {activeTab === 'buy' && (\n          <div className=\"buy-section\">\n            {filteredItems.length === 0 ? (\n              <p>No subscriptions are available for purchase.</p>\n            ) : (\n              filteredItems.map((item) => (\n                <div className=\"subscription-item\" key={item.id}>\n                  <div className=\"subscription-left\">\n                    <div className=\"subscription-icon-container\">\n                      {item.logo ? (\n                        <img\n                          src={item.logo}\n                          alt={item.name}\n                          className=\"subscription-icon\"\n                          onError={(e) => {\n                            e.target.onerror = null;\n                            e.target.src = \"https://via.placeholder.com/48?text=\" + item.name.charAt(0);\n                          }}\n                        />\n                      ) : (\n                        <div className=\"empty-icon-space\"></div>\n                      )}\n                    </div>\n                    <div className=\"subscription-text\">\n                      <div className=\"subscription-name\">{item.name}</div>\n                      <div className=\"subscription-duration\">{item.duration}</div>\n                    </div>\n                  </div>\n                  <div className=\"subscription-right\">\n                    <span className=\"subscription-price\">Rs. {item.price}</span>\n                    <button\n                      className=\"action-button\"\n                      onClick={() => handleBuyClick(item)}\n                    >\n                      Buy\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* Sell Tab */}\n        {activeTab === 'sell' && (\n          <div className=\"sell-section\">\n            {/* Sell History (unsold items) */}\n            <div className=\"sell-history\">\n              {sellItems.map((item) => (\n                <div className=\"subscription-item\" key={item.id}>\n                  <div className=\"subscription-left\">\n                    <div className=\"subscription-icon-container\">\n                      {item.logo ? (\n                        <img\n                          src={item.logo}\n                          alt={item.name}\n                          className=\"subscription-icon\"\n                          onError={(e) => {\n                            e.target.onerror = null;\n                            e.target.src = \"https://via.placeholder.com/48?text=\" + item.name.charAt(0);\n                          }}\n                        />\n                      ) : (\n                        <div className=\"empty-icon-space\"></div>\n                      )}\n                    </div>\n                    <div className=\"subscription-text\">\n                      <div className=\"subscription-name\">{item.name}</div>\n                      <div className=\"subscription-duration\">{item.duration}</div>\n                    </div>\n                  </div>\n                  <div className=\"subscription-right\">\n                    {editingPriceId === item.id ? (\n                      <>\n                        <input\n                          type=\"number\"\n                          value={tempPrice}\n                          onChange={(e) => setTempPrice(e.target.value)}\n                          style={{\n                            width: '70px',\n                            borderRadius: '4px',\n                            padding: '3px 5px'\n                          }}\n                        />\n                        <button\n                          className=\"action-button\"\n                          onClick={() => handleSavePrice(item.id)}\n                        >\n                          Save\n                        </button>\n                        <button\n                          className=\"action-button\"\n                          onClick={handleCancelPriceEdit}\n                        >\n                          Cancel\n                        </button>\n                      </>\n                    ) : (\n                      <>\n                        <span className=\"subscription-price\">Rs. {item.price}</span>\n                        <button\n                          className=\"action-button\"\n                          onClick={() => handlePriceEdit(item.id, item.price)}\n                        >\n                          Edit\n                        </button>\n                      </>\n                    )}\n                    <button\n                      className=\"action-button\"\n                      onClick={() => handleSold(item.id)}\n                    >\n                      Sold\n                    </button>\n                    <FontAwesomeIcon\n                      icon={faTrash}\n                      className=\"delete-icon\"\n                      onClick={() => handleDeleteSellItem(item.id)}\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Buttons for Add Subscription & Sell History */}\n            <div\n              className={`sell-buttons-container ${\n                !showSellForm ? 'two-buttons' : 'one-button'\n              }`}\n            >\n              {!showSellForm && (\n                <button\n                  className=\"action-button add-subscription-button\"\n                  onClick={handleAddSubscriptionClick}\n                >\n                  Add to Sell\n                </button>\n              )}\n              <button\n                className=\"action-button sell-history-button\"\n                onClick={handleSellHistoryClick}\n              >\n                History\n              </button>\n            </div>\n\n            {/* Sell Form */}\n            {showSellForm && (\n              <form className=\"sell-form\" onSubmit={handleSellFormSubmit}>\n                <div className=\"form-group\">\n                  <label>Select Subscription</label>\n                  <select\n                    name=\"selectedSub\"\n                    value={selectedDashboardSub}\n                    onChange={handleSelectedSubscriptionChange}\n                    required\n                  >\n                    <option value=\"\" disabled>Select from your subscriptions</option>\n                    {userSubscriptions.map((sub) => (\n                      <option key={sub.id} value={sub.id}>\n                        {sub.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label>Selling Price</label>\n                  <input\n                    type=\"number\"\n                    name=\"price\"\n                    placeholder=\"Enter selling price\"\n                    value={sellPrice}\n                    onChange={(e) => setSellPrice(e.target.value)}\n                    required\n                  />\n                </div>\n                <button className=\"action-button sell-button\" type=\"submit\">\n                  Sell Subscription\n                </button>\n              </form>\n            )}\n\n            {/* Sold Items History */}\n            {showSoldHistory && (\n              <div className=\"sold-history\">\n                <h3>Sold History</h3>\n                {soldItems.length === 0 ? (\n                  <p>No subscriptions sold yet.</p>\n                ) : (\n                  soldItems.map((item) => (\n                    <div className=\"subscription-item\" key={item.id}>\n                      <div className=\"subscription-left\">\n                        <div className=\"subscription-icon-container\">\n                          {item.logo ? (\n                            <img\n                              src={item.logo}\n                              alt={item.name}\n                              className=\"subscription-icon\"\n                              onError={(e) => {\n                                e.target.onerror = null;\n                                e.target.src = \"https://via.placeholder.com/48?text=\" + item.name.charAt(0);\n                              }}\n                            />\n                          ) : (\n                            <div className=\"empty-icon-space\"></div>\n                          )}\n                        </div>\n                        <div className=\"subscription-text\">\n                          <div className=\"subscription-name\">{item.name}</div>\n                          <div className=\"subscription-duration\">{item.duration}</div>\n                        </div>\n                      </div>\n                      <div className=\"subscription-right\">\n                        <span className=\"subscription-price\">Rs. {item.price}</span>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Expired Tab */}\n        {activeTab === 'expired' && (\n          <div className=\"sell-section\">\n            {expiredItems.length === 0 ? (\n              <p>No subscriptions have expired yet.</p>\n            ) : (\n              expiredItems.map((item) => (\n                <div className=\"subscription-item\" key={item.id}>\n                  <div className=\"subscription-left\">\n                    <div className=\"subscription-icon-container\">\n                      {item.logo ? (\n                        <img\n                          src={item.logo}\n                          alt={item.name}\n                          className=\"subscription-icon\"\n                          onError={(e) => {\n                            e.target.onerror = null;\n                            e.target.src = \"https://via.placeholder.com/48?text=\" + item.name.charAt(0);\n                          }}\n                        />\n                      ) : (\n                        <div className=\"empty-icon-space\"></div>\n                      )}\n                    </div>\n                    <div className=\"subscription-text\">\n                      <div className=\"subscription-name\">{item.name}</div>\n                    </div>\n                  </div>\n                  <div className=\"subscription-right\">\n                    <span className=\"subscription-price\">Rs. {item.price}</span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n      </main>\n\n      {/* MODAL: Single \"Contact Seller\" Button */}\n      {showBuyModal && selectedItem && (\n        <div className=\"buy-modal-overlay\">\n          <div className=\"buy-modal-content\">\n            <button className=\"buy-modal-close\" onClick={handleCloseBuyModal}>\n              &times;\n            </button>\n            <h2>Purchase {selectedItem.name}</h2>\n            <p>Duration: {selectedItem.duration}</p>\n            <p>Price: Rs. {selectedItem.price}</p>\n            <div className=\"buy-modal-actions\">\n              <button className=\"action-button\" onClick={handleContactSeller}>\n                Contact Seller\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Market;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}